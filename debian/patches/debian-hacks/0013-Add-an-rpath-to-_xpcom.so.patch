From 622875d82eb936e2067b69b3da1f6839793fcada Mon Sep 17 00:00:00 2001
From: Mike Hommey <glandium@debian.org>
Date: Wed, 30 Apr 2008 08:29:06 +0200
Subject: [PATCH 13/44] Add an rpath to _xpcom.so

This makes its dependencies, libxpcom.so and libpyxpcom.so, be found when
importing _xpcom.so from python.
---
 extensions/python/xpcom/src/module/Makefile.in |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/extensions/python/xpcom/src/module/Makefile.in b/extensions/python/xpcom/src/module/Makefile.in
index 984e2ec..e9ae298 100644
--- a/extensions/python/xpcom/src/module/Makefile.in
+++ b/extensions/python/xpcom/src/module/Makefile.in
@@ -77,6 +77,7 @@ ifeq ($(OS_ARCH),Darwin)
 else
   EXTRA_DSO_LDOPTS += $(XPCOM_GLUE_LDOPTS) \
                       $(MOZ_COMPONENT_LIBS) \
+                      -Wl,-rpath,$(installdir) \
                       $(NULL)
 endif
 IMPORT_LIBRARY		:= $(SHARED_LIBRARY:.pyd=.lib)
-- 
1.7.0.rc0.69.g2ee80

