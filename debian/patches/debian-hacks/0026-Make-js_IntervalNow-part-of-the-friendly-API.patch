From 779f391a5a50733e55765e28dc33d06983ffff78 Mon Sep 17 00:00:00 2001
From: Mike Hommey <glandium@debian.org>
Date: Wed, 1 Jul 2009 07:45:27 +0200
Subject: [PATCH 26/44] Make js_IntervalNow part of the friendly API

https://bugzilla.mozilla.org/show_bug.cgi?id=491617
---
 js/src/jsdate.cpp |    8 ++++----
 js/src/jsdate.h   |    2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/js/src/jsdate.cpp b/js/src/jsdate.cpp
index 3dc56c1..e5784a9 100644
--- a/js/src/jsdate.cpp
+++ b/js/src/jsdate.cpp
@@ -2379,16 +2379,16 @@ js_DateGetMsecSinceEpoch(JSContext *cx, JSObject *obj)
 #ifdef JS_THREADSAFE
 #include "prinrval.h"
 
-uint32 
-js_IntervalNow() 
+JS_FRIEND_API(uint32)
+js_IntervalNow()
 {
     return uint32(PR_IntervalToMilliseconds(PR_IntervalNow()));
 }
 
 #else /* !JS_THREADSAFE */
 
-uint32 
-js_IntervalNow() 
+JS_FRIEND_API(uint32)
+js_IntervalNow()
 {
     return uint32(PRMJ_Now() / PRMJ_USEC_PER_MSEC);
 }
diff --git a/js/src/jsdate.h b/js/src/jsdate.h
index c6e81d9..85e4932 100644
--- a/js/src/jsdate.h
+++ b/js/src/jsdate.h
@@ -121,7 +121,7 @@ js_DateGetMsecSinceEpoch(JSContext *cx, JSObject *obj);
 
 typedef uint32 JSIntervalTime;
 
-JSIntervalTime
+extern JS_FRIEND_API(JSIntervalTime)
 js_IntervalNow();
 
 JS_END_EXTERN_C
-- 
1.7.0.rc0.69.g2ee80

